{"version":3,"sources":["config.js","data-provider/segmentService.ts","data-provider/dataProvider.ts","fields/headers/HeadersList.tsx","theme/theme.ts","common/BackButton.tsx","fields/headers/HeaderCreate.tsx","fields/headers/HeaderEdit.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["apiUrl","process","REACT_APP_API_URL","segmentsObj","_arrangeId","slice","data","forEach","val","i","id","_updateDb","fetchUtils","fetchJson","method","body","getSegmentBody","getSliceData","resource","getSlice","delete","index","findIndex","splice","create","length","push","JSON","stringify","SegmentDetailID","SegmentID","Title","title","Details","getSegments","a","Object","keys","json","toLowerCase","replace","parse","console","log","getById","res","segmentService","find","httpClient","getList","params","total","getOne","parseInt","toString","getMany","getManyReference","update","then","updateMany","Promise","all","ids","map","responses","deleteMany","HeadersList","props","List","pagination","Datagrid","TextField","source","sortable","EditButton","DeleteButton","theme","createMuiTheme","palette","primary","main","deepPurple","secondary","amber","overrides","MuiAppBar","colorSecondary","color","backgroundColor","withRouter","onClick","history","goBack","children","CreateHeader","Button","Create","SimpleForm","redirect","TextInput","required","multiline","EditHeader","App","Admin","dataProvider","Resource","icon","StarIcon","options","label","name","list","edit","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.396d82be.chunk.js","sourcesContent":["export const apiUrl =\n  process.env.REACT_APP_API_URL || 'http://localhost:3100/segments';\n","import { fetchUtils } from 'ra-core';\nimport { apiUrl } from '../config';\nimport { ResourceSlice } from '../models/Slice';\n\nclass SegmentService {\n  segmentsObj: any = {};\n\n  private _arrangeId = (slice: ResourceSlice) =>\n    slice.data.forEach((val, i) => (val.id = i + 1));\n\n  private _updateDb = (slice: ResourceSlice) => {\n    this._arrangeId(slice);\n    return fetchUtils.fetchJson(`${apiUrl}/${slice.id}`, {\n      method: 'PUT',\n      body: this.getSegmentBody(slice),\n    });\n  };\n\n  getSliceData = (resource: string): any[] => this.segmentsObj[resource].data;\n  getSlice = (resource: string): ResourceSlice => this.segmentsObj[resource];\n\n  delete = (id: number, resource: string) => {\n    const slice = this.getSlice(resource);\n    const index = slice.data.findIndex(val => val.id === id);\n    slice.data.splice(index, 1);\n\n    return this._updateDb(slice);\n  };\n\n  create = (data: any, resource: string) => {\n    const slice = this.getSlice(resource);\n    data.id = slice.data.length + 1;\n    slice.data.push(data);\n\n    return this._updateDb(slice);\n  };\n\n  getSegmentBody = (slice: ResourceSlice) =>\n    JSON.stringify({\n      SegmentDetailID: slice.id,\n      SegmentID: slice.id,\n      Title: slice.title,\n      Details: JSON.stringify(slice.data),\n    });\n\n  getSegments = async () => {\n    if (Object.keys(this.segmentsObj).length === 0) {\n      try {\n        const response: any[] = await (await fetchUtils.fetchJson(apiUrl)).json;\n        response.forEach(val => {\n          const title: string = val.Title.toLowerCase().replace(' ', '');\n          this.segmentsObj[title] = {\n            id: val.SegmentDetailID,\n            title: val.Title,\n            data: JSON.parse(val.Details),\n          };\n        });\n        console.log(this.segmentsObj);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n  };\n}\n\nexport default new SegmentService();\n","/* eslint-disable import/no-anonymous-default-export */\n\nimport { fetchUtils, DataProvider } from 'ra-core';\nimport segmentService from './segmentService';\n\nconst getById = (id: number, res: string) => {\n  const slice = segmentService.getSliceData(res);\n  return slice.find(val => val.id === id);\n};\n\nexport default (\n  apiUrl: string,\n  httpClient = fetchUtils.fetchJson\n): DataProvider => ({\n  getList: async (resource, params) => {\n    await segmentService.getSegments();\n    return { total: 10, data: segmentService.getSliceData(resource) };\n  },\n\n  getOne: (resource, params) =>\n    getById(parseInt(params.id.toString()), resource),\n\n  getMany: async (resource, params) => {\n    console.log(params, 'UPDATE');\n    await segmentService.getSegments();\n    return { data: segmentService.getSliceData(resource) };\n  },\n\n  getManyReference: async (resource, params) => {\n    await segmentService.getSegments();\n    return { total: 10, data: segmentService.getSliceData(resource) };\n  },\n\n  update: (resource, params) =>\n    httpClient(`${apiUrl}/${resource}/${params.id}`, {\n      method: 'PUT',\n      body: JSON.stringify(params.data),\n    }).then(({ json }) => ({ data: json })),\n\n  // simple-rest doesn't handle provide an updateMany route, so we fallback to calling update n times instead\n  updateMany: (resource, params) =>\n    Promise.all(\n      params.ids.map(id =>\n        httpClient(`${apiUrl}/${resource}/${id}`, {\n          method: 'PUT',\n          body: JSON.stringify(params.data),\n        })\n      )\n    ).then(responses => ({ data: responses.map(({ json }) => json.id) })),\n\n  create: (resource, params) => {\n    console.log(params, 'CREATE');\n    return segmentService.create(params.data, resource).then(({ json }) => ({\n      data: { ...json, id: json.id },\n    }));\n  },\n\n  delete: (resource, params) => {\n    return segmentService\n      .delete(parseInt(params.id as string), resource)\n      .then(({ json }) => ({\n        data: json,\n      }));\n  },\n\n  // simple-rest doesn't handle filters on DELETE route, so we fallback to calling DELETE n times instead\n  deleteMany: (resource, params) =>\n    Promise.all(\n      params.ids.map(id =>\n        segmentService.delete(parseInt(id as string), resource)\n      )\n    ).then(responses => ({ data: responses.map(({ json }) => json.id) })),\n});\n","import * as React from 'react';\nimport {\n  Datagrid,\n  DeleteButton,\n  EditButton,\n  List,\n  TextField,\n} from 'react-admin';\n\nexport interface HeadersListProps {}\nconst HeadersList: React.FC<HeadersListProps> = props => {\n  return (\n    <List pagination={false} {...props}>\n      <Datagrid>\n        <TextField source='id' sortable={false} />\n        <TextField source='title' sortable={false} />\n        <TextField source='text' sortable={false} />\n        <EditButton />\n        <DeleteButton />\n      </Datagrid>\n    </List>\n  );\n};\n\nexport default HeadersList;\n","import { createMuiTheme } from '@material-ui/core';\nimport { amber, deepPurple } from '@material-ui/core/colors';\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: {\n      main: deepPurple[500],\n    },\n    secondary: {\n      main: amber[600],\n    },\n  },\n  overrides: {\n    MuiAppBar: {\n      colorSecondary: {\n        color: 'white',\n        backgroundColor: deepPurple[500],\n      },\n    },\n  },\n});\nexport default theme;\n","import React from 'react';\nimport { withRouter } from 'react-router';\n\nconst BackButton = (props: any) => {\n  return <div onClick={props.history.goBack}>{props.children}</div>;\n};\n\nexport default withRouter(BackButton as any);\n","import { Button } from '@material-ui/core';\nimport * as React from 'react';\nimport { Create, SimpleForm, TextInput } from 'react-admin';\nimport BackButton from '../../common/BackButton';\n\nexport interface CreateHeaderProps {}\n\nconst CreateHeader: React.FC<CreateHeaderProps> = props => {\n  return (\n    <>\n      <div>\n        <BackButton>\n          <Button>Back</Button>\n        </BackButton>\n      </div>\n      <Create title='Add a new header' {...props}>\n        <SimpleForm redirect='list'>\n          <TextInput required={true} source='title' />\n          <TextInput required={true} multiline={true} source='text' />\n        </SimpleForm>\n      </Create>\n    </>\n  );\n};\n\nexport default CreateHeader;\n","import { Button } from '@material-ui/core';\nimport * as React from 'react';\nimport BackButton from '../../common/BackButton';\n\nexport interface EditHeaderProps {}\n\nconst EditHeader: React.FC<EditHeaderProps> = () => {\n  return (\n    <>\n      <BackButton>\n        <Button>Back</Button>\n      </BackButton>\n      <h1>Edit Page</h1>\n    </>\n  );\n};\n\nexport default EditHeader;\n","import React from 'react';\nimport './App.css';\nimport { Admin, Resource } from 'react-admin';\nimport dataProvider from './data-provider/dataProvider';\nimport HeadersList from './fields/headers/HeadersList';\nimport { apiUrl } from './config';\nimport StarIcon from '@material-ui/icons/Star';\nimport theme from './theme/theme';\nimport CreateHeader from './fields/headers/HeaderCreate';\nimport EditHeader from './fields/headers/HeaderEdit';\n\nfunction App() {\n  return (\n    <Admin\n      theme={theme}\n      title='Admin Panel'\n      dataProvider={dataProvider(apiUrl)}\n    >\n      <Resource\n        icon={StarIcon}\n        options={{ label: 'Headers' }}\n        name={'header'}\n        list={HeadersList}\n        create={CreateHeader}\n        edit={EditHeader}\n      ></Resource>\n    </Admin>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n}\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}