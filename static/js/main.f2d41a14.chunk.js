(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[0],{318:function(e,t,n){},319:function(e,t,n){},457:function(e,t,n){"use strict";n.r(t);var r=n(10),a=(n(0),n(14)),c=n.n(a),i=(n(318),n(319),n(530)),s=n(529),o=n(41),u=n(56),d=n.n(u),l=n(82),j=n(101),f=n(128),b=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:3100/segments",h=new function e(){var t=this;Object(f.a)(this,e),this.segmentsObj={},this._arrangeId=function(e){return e.data.forEach((function(e,t){return e.id=t+1}))},this._updateDb=function(e){return t._arrangeId(e),j.a.fetchJson("".concat(b,"/").concat(e.id),{method:"PUT",body:t._getSegmentBody(e)})},this._getSegmentBody=function(e){return JSON.stringify({SegmentDetailID:e.id,SegmentID:e.id,Title:e.title,Details:JSON.stringify(e.data)})},this.create=function(e,n){var r=t.getSlice(n);return e.id=r.data.length+1,r.data.push(e),t._updateDb(r)},this.getSliceData=function(e){return t.segmentsObj[e].data},this.getSlice=function(e){return t.segmentsObj[e]},this.update=function(e,n){var r=t.getSlice(n),a=r.data.findIndex((function(t){return t.id===e.id}));return r.data[a]=e,t._updateDb(r)},this.delete=function(e,n){var r=t.getSlice(n),a=r.data.findIndex((function(t){return t.id===e}));return r.data.splice(a,1),t._updateDb(r)},this.getSegments=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t.segmentsObj).length){e.next=14;break}return e.prev=1,e.next=4,j.a.fetchJson(b);case 4:return e.next=6,e.sent.json;case 6:e.sent.forEach((function(e){var n=e.Title.toLowerCase().replace(" ","");t.segmentsObj[n]={id:e.SegmentDetailID,title:e.Title,data:JSON.parse(e.Details)}})),console.log(t.segmentsObj),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))},p=function(e,t){return h.getSliceData(t).find((function(t){return t.id===e}))},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.a.fetchJson;return{getList:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getSegments();case 2:return e.abrupt("return",{total:10,data:h.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getSegments();case 2:return e.abrupt("return",{data:Object(o.a)({},p(parseInt(n.id.toString()),t))});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMany:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,"UPDATE"),e.next=3,h.getSegments();case 3:return e.abrupt("return",{data:h.getSliceData(t)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getManyReference:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getSegments();case 2:return e.abrupt("return",{total:10,data:h.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t){return console.log(t,"UPDATE"),h.update(t.data,e).then((function(e){var t=e.json;return{data:Object(o.a)({id:t.id},t)}}))},updateMany:function(n,r){return Promise.all(r.ids.map((function(a){return t("".concat(e,"/").concat(n,"/").concat(a),{method:"PUT",body:JSON.stringify(r.data)})}))).then((function(e){return{data:e.map((function(e){return e.json.id}))}}))},create:function(e,t){return console.log(t,"CREATE"),h.create(t.data,e).then((function(e){var t=e.json;return{data:Object(o.a)(Object(o.a)({},t),{},{id:t.id})}}))},delete:function(e,t){return h.delete(parseInt(t.id),e).then((function(e){return{data:e.json}}))},deleteMany:function(e,t){return Promise.all(t.ids.map((function(t){return h.delete(parseInt(t),e)}))).then((function(e){return{data:e.map((function(e){return e.json.id}))}}))}}},g=n(531),x=n(532),m=n(540),S=n(522),v=n(538),D=function(e){return Object(r.jsx)(g.a,Object(o.a)(Object(o.a)({pagination:!1},e),{},{children:Object(r.jsxs)(x.a,{children:[Object(r.jsx)(m.a,{source:"id",sortable:!1}),Object(r.jsx)(m.a,{source:"title",sortable:!1}),Object(r.jsx)(m.a,{source:"text",sortable:!1}),Object(r.jsx)(S.a,{}),Object(r.jsx)(v.a,{})]})}))},y=n(278),_=n.n(y),T=n(279),w=n(524),P=n(525),k=Object(T.a)({palette:{primary:{main:w.a[500]},secondary:{main:P.a[600]}},overrides:{MuiAppBar:{colorSecondary:{color:"white",backgroundColor:w.a[500]}}}}),E=n(462),I=n(544),C=n(533),A=n(534),B=n(16),J=Object(B.i)((function(e){return Object(r.jsx)("div",{onClick:e.history.goBack,children:e.children})})),F=function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(J,{children:Object(r.jsx)(E.a,{children:"Back"})})}),Object(r.jsx)(I.a,Object(o.a)(Object(o.a)({title:"Add a new header"},e),{},{children:Object(r.jsxs)(C.a,{redirect:"list",children:[Object(r.jsx)(A.a,{required:!0,source:"title"}),Object(r.jsx)(A.a,{required:!0,multiline:!0,source:"text"})]})}))]})},R=n(536),L=function(e){return console.log(e),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(J,{children:Object(r.jsx)(E.a,{children:"Back"})})}),Object(r.jsx)(R.a,Object(o.a)(Object(o.a)({},e),{},{children:Object(r.jsxs)(C.a,{redirect:"list",children:[Object(r.jsx)(A.a,{disabled:!0,source:"id"}),Object(r.jsx)(A.a,{required:!0,source:"title"}),Object(r.jsx)(A.a,{required:!0,multiline:!0,source:"text"})]})}))]})};var U=function(){return Object(r.jsx)(i.a,{theme:k,title:"Admin Panel",dataProvider:O(b),children:Object(r.jsx)(s.a,{icon:_.a,options:{label:"Headers"},name:"header",list:D,create:F,edit:L})})},N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,547)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};c.a.render(Object(r.jsx)(U,{}),document.getElementById("root")),N()}},[[457,1,2]]]);
//# sourceMappingURL=main.f2d41a14.chunk.js.map