(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[0],{350:function(e,t,n){},351:function(e,t,n){},489:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(0),c=n(17),i=n.n(c),s=(n(350),n(351),n(575)),o=n(574),u=n(21),l=n(24),d=n.n(l),j=n(45),b=n(67),p=n(81),O=n(111),f="https://api.alhamdian.pk/api/SegmentDetail",h=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.alhamdian.pk/api/SegmentDetail"}).REACT_APP_AUTH_URL||"https://api.alhamdian.pk/api/login",x=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.alhamdian.pk/api/SegmentDetail"}).REACT_APP_FILE_UPLOAD_URL||"https://api.nisafoundation.org/api/SegmentDetail/UploadFile",m=new function e(){var t=this;Object(b.a)(this,e),this.uploadAllFiles=function(e){return Promise.all(e.map((function(e){return t.uploadFile(e)}))).then((function(e){return e.map((function(e){return e.body}))}))},this.uploadFile=function(e){var t=new FormData;return t.append("formFile",e,e.name),console.log(t),console.log(e),O.a.fetchJson(x,{method:"POST",body:t})}},g=new(function(){function e(){var t=this;Object(b.a)(this,e),this.segmentsObj={},this._arrangeId=function(e){return e.data.forEach((function(e,t){return e.id=t+1}))},this._updateDb=function(e){return t._arrangeId(e),O.a.fetchJson("".concat(f,"/").concat(e.id),{method:"PUT",headers:t._getHttpHeaders(),body:t._getSegmentBody(e)})},this._getSegmentBody=function(e){return JSON.stringify({SegmentDetailID:e.id,SegmentID:e.id,Title:e.title,Details:JSON.stringify(e.data)})},this._uploadImagesIfExist=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageUpload||!Array.isArray(t.imageUpload)){e.next=3;break}return e.next=3,m.uploadAllFiles(t.imageUpload.map((function(e){return e.rawFile}))).then((function(e){return delete t.imageUpload,t.imageUrl=e[0].replace(/"/g,"")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getSlice(a),n.id=r.data.length+1,r.data.push(n),e.next=5,t._uploadImagesIfExist(n);case 5:return e.abrupt("return",t._updateDb(r).then((function(){return{data:Object(u.a)(Object(u.a)({},n),{},{id:n.id})}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getSliceData=function(e){return t.segmentsObj[e].data},this.getSlice=function(e){return t.segmentsObj[e]},this.update=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getSlice(a),c=r.data.findIndex((function(e){return e.id===n.id})),r.data[c]=n,e.next=5,t._uploadImagesIfExist(n);case 5:return e.abrupt("return",t._updateDb(r).then((function(){return{data:Object(u.a)(Object(u.a)({},n),{},{id:n.id})}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.delete=function(e,n){var a=t.getSlice(n),r=a.data.findIndex((function(t){return t.id===e})),c=a.data.splice(r,1);return t._updateDb(a).then((function(){return{data:c[0]}}))},this.getSegments=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t.segmentsObj).length){e.next=14;break}return e.prev=1,e.next=4,O.a.fetchJson(f);case 4:return e.next=6,e.sent.json;case 6:e.sent.forEach((function(e){var n=e.Title.toLowerCase().replace(" ","");t.segmentsObj[n]={id:e.SegmentDetailID,title:e.Title,data:JSON.parse(e.Details)}})),console.log(t.segmentsObj),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))}return Object(p.a)(e,[{key:"_getHttpHeaders",value:function(){var e=localStorage.getItem("auth");return e?new Headers({"Content-Type":"application/json",Authorization:"Bearer "+e}):new Headers({"Content-Type":"application/json"})}}]),e}()),v=function(e,t){return g.getSliceData(t).find((function(t){return t.id===e}))},S=n(29),w=n(490),y=n(576),_=n(577),I=n(565),T=n(566),k=n(582),P=function(e){var t=e.children,n=e.padding;return Object(a.jsx)("div",{style:{padding:n},children:t})},E=function(e){var t=e,n=t.resource[0].toUpperCase()+t.resource.slice(1),r=Object(S.a)(),c=Object(w.a)(r.breakpoints.down("sm"));return Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("h2",{children:[n," List"]}),Object(a.jsx)(y.a,Object(u.a)(Object(u.a)({pagination:!1},e),{},{children:Object(a.jsxs)(_.a,{style:{overflowY:"hidden",overflowX:"scroll"},children:[Object(a.jsx)(I.a,{source:"id",sortable:!1}),Object(a.jsx)(I.a,{source:"title",sortable:!1}),!c&&Object(a.jsx)(I.a,{source:"text",sortable:!1}),Object(a.jsx)(T.a,{}),Object(a.jsx)(k.a,{})]})}))]})},A=n(310),D=n(568),C=n(569),U=Object(A.a)({palette:{primary:{main:D.a[500]},secondary:{main:C.a[600]}},overrides:{MuiToolbar:{dense:{minHeight:"55px"}},MuiListItemIcon:{root:{color:D.a[300]}},MuiMenuItem:{root:{"&$active":{color:D.a[500]},textTransform:"uppercase",fontSize:"14px",fontWeight:"bold",marginTop:"8px",paddingTop:"14px",paddingBottom:"14px"}},MuiAppBar:{colorSecondary:{color:"white",backgroundColor:D.a[500]}}}}),L=n(588),F=n(589),R=n(585),H=n(578),W=n(573),B=n(210),N=n(287),M=n.n(N),J=n(15),q=Object(J.j)((function(e){return Object(a.jsx)(B.a,{color:"primary",onClick:e.history.goBack,children:Object(a.jsx)(M.a,{})})})),K=function(e){return Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{}),Object(a.jsx)("h2",{style:{marginLeft:"18px"},children:"Add a new Header"})]}),Object(a.jsx)(L.a,Object(u.a)(Object(u.a)({title:"Add a new header"},e),{},{children:Object(a.jsxs)(F.a,{margin:"normal",redirect:"list",children:[Object(a.jsx)(R.a,{required:!0,source:"title"}),Object(a.jsx)(H.a,{accept:"image/*",source:"imageUpload",children:Object(a.jsx)(W.a,{source:"src",title:"title"})}),Object(a.jsx)(R.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})},V=n(581),Y=function(e){return Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{}),Object(a.jsx)("h2",{style:{marginLeft:"18px",marginBottom:"30px"},children:"Edit Header"})]}),Object(a.jsx)(V.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(a.jsxs)(F.a,{margin:"normal",redirect:"list",children:[Object(a.jsx)(R.a,{disabled:!0,source:"id"}),Object(a.jsx)(R.a,{required:!0,source:"title"}),Object(a.jsx)(W.a,{source:"imageUrl",label:"Image"}),Object(a.jsx)(H.a,{accept:"image/*",source:"imageUpload",children:Object(a.jsx)(W.a,{source:"src",title:"title"})}),Object(a.jsx)(R.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})},z=function(){return Object(a.jsx)(P,{padding:"10px",children:Object(a.jsx)("h1",{children:"Welcome to the dashboard"})})},X=function e(t,n){Object(b.a)(this,e),this.UsernameOrEmail=t,this.Password=n},$=new function e(){var t=this;Object(b.a)(this,e),this.currentUser=null,this.login=function(){var e=Object(j.a)(d.a.mark((function e(n,a){var r,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.fetchJson(h,{method:"POST",body:JSON.stringify(new X(n,a)),headers:new Headers({"Content-Type":"application/json"})});case 2:if(!((r=e.sent).status<200||r.status>=300)&&r.json.Successful){e.next=5;break}throw new Error("".concat(r.status));case 5:return c=r.json.Response,t.currentUser=c,e.abrupt("return",c.access_token);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},G={login:function(){var e=Object(j.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.password,e.abrupt("return",$.login(n,a).then((function(e){localStorage.setItem("auth",e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(e){return localStorage.removeItem("auth"),Promise.resolve()},checkAuth:function(e){return localStorage.getItem("auth")?Promise.resolve():Promise.reject()},checkError:function(e){return Promise.resolve()},getPermissions:function(e){return Promise.resolve()}},Q=n(168),Z=n(571),ee=n(587),te=n(209),ne=n(590),ae=n(295),re=n.n(ae),ce=n(293),ie=n.n(ce),se=n(292),oe=n.n(se),ue=n(294),le=n.n(ue),de=n(8),je=function(e){return Object(a.jsx)(Q.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(a.jsx)(Z.a,{disabled:e.saving&&e.invalid})}))},be=function(e){var t=r.useRef(),n=Object(de.f)((function(e){return e.admin.ui.sidebarOpen}));return r.useEffect((function(){setTimeout((function(){var e;return null===(e=t.current)||void 0===e?void 0:e.updateIndicator()}),220)}),[n]),"1"!==e.id?Object(a.jsx)(J.a,{to:"/".concat(e.resource,"/1")}):Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsx)("div",{children:Object(a.jsx)("h2",{style:{marginLeft:"18px",marginBottom:"30px"},children:"Footer"})}),Object(a.jsx)(V.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(a.jsxs)(ee.a,{margin:"normal",tabs:Object(a.jsx)(te.a,{action:t,centered:!0}),redirect:!1,toolbar:Object(a.jsx)(je,{}),children:[Object(a.jsx)(ne.a,{icon:Object(a.jsx)(oe.a,{}),label:"About",children:Object(a.jsx)(R.a,{multiline:!0,rows:8,label:"About Text",fullWidth:!0,source:"about.aboutUs"})}),Object(a.jsxs)(ne.a,{icon:Object(a.jsx)(ie.a,{}),label:"Contact",children:[Object(a.jsx)(R.a,{label:"Address",fullWidth:!0,source:"contact.address"}),Object(a.jsx)(R.a,{label:"Phone",fullWidth:!0,source:"contact.phone"}),Object(a.jsx)(R.a,{label:"Email",fullWidth:!0,source:"contact.email"})]}),Object(a.jsxs)(ne.a,{icon:Object(a.jsx)(le.a,{}),label:"Social",children:[Object(a.jsx)(R.a,{label:"Facebook",fullWidth:!0,source:"social.facebook"}),Object(a.jsx)(R.a,{label:"Instagram",fullWidth:!0,source:"social.instagram"}),Object(a.jsx)(R.a,{label:"Twitter",fullWidth:!0,source:"social.twitter"}),Object(a.jsx)(R.a,{label:"YouTube",fullWidth:!0,source:"social.youtube"})]}),Object(a.jsxs)(ne.a,{icon:Object(a.jsx)(re.a,{}),label:"Stores",children:[Object(a.jsx)(R.a,{label:"App Store",fullWidth:!0,source:"stores.appStore"}),Object(a.jsx)(R.a,{label:"Play Store",fullWidth:!0,source:"stores.playStore"})]})]})}))]})},pe=function(e){var t=e.resource;return Object(a.jsx)(J.a,{to:"".concat(t,"/1")})},Oe=n(308),fe=n.n(Oe),he=n(208),xe=n.n(he),me=n(93),ge=n(309),ve=n(163),Se=n(164),we=n.n(Se),ye=Object(me.a)((function(e){return{active:{color:e.palette.primary.dark,"& .MuiListItemIcon-root":{color:e.palette.primary.dark}}}})),_e=Object(J.j)((function(e){var t=e.onMenuClick,n=e.logout,c=Object(w.a)((function(e){return e.breakpoints.down("xs")})),i=Object(de.f)((function(e){return e.admin.ui.sidebarOpen})),s=Object(de.f)(ge.b),o=ye();return Object(a.jsxs)("div",{children:[Object(a.jsx)(ve.a,{to:"/",primaryText:"Dashboard",activeClassName:o.active,leftIcon:Object(a.jsx)(we.a,{}),onClick:t,sidebarIsOpen:i,exact:!0},"dashboard"),s.map((function(e){return Object(a.jsx)(ve.a,{to:"/".concat(e.name),primaryText:e.options&&e.options.label||e.name,activeClassName:o.active,leftIcon:Object(r.createElement)(e.icon),onClick:t,sidebarIsOpen:i},e.name)})),c&&n]})})),Ie=function(e){var t=e,n=t.resource[0].toUpperCase()+t.resource.slice(1),r=Object(S.a)(),c=Object(w.a)(r.breakpoints.down("sm"));return Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("h2",{children:[n," List"]}),Object(a.jsx)(y.a,Object(u.a)(Object(u.a)({pagination:!1},e),{},{children:Object(a.jsxs)(_.a,{style:{overflowY:"hidden",overflowX:"scroll"},children:[Object(a.jsx)(I.a,{source:"id",sortable:!1}),Object(a.jsx)(I.a,{source:"title",sortable:!1}),!c&&Object(a.jsx)(I.a,{source:"text",sortable:!1}),Object(a.jsx)(T.a,{}),Object(a.jsx)(k.a,{})]})}))]})},Te=n(41),ke=n(583),Pe=function(e){var t=r.useState(!1),n=Object(Te.a)(t,2),c=n[0],i=n[1];return Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{}),Object(a.jsx)("h2",{style:{marginLeft:"18px"},children:"Add a new Notice"})]}),Object(a.jsx)(L.a,Object(u.a)(Object(u.a)({title:"Add a new header"},e),{},{children:Object(a.jsxs)(F.a,{margin:"normal",redirect:"list",children:[Object(a.jsx)(R.a,{required:!0,source:"title"}),Object(a.jsx)(ke.a,{onChange:function(e){return i(e)},label:"Enable Video",source:"videoOptions.enabled"}),!c&&Object(a.jsx)(H.a,{accept:"image/*",source:"imageUpload",children:Object(a.jsx)(W.a,{source:"src",title:"title"})}),Object(a.jsx)(R.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})},Ee=n(98);var Ae=function(e){var t=function(e,t){var n=Object(Ee.a)({type:"getOne",resource:e,payload:{id:t}}).data;return null===n||void 0===n?void 0:n.videoOptions.enabled}(e.resource,e.id),n=r.useState(t),c=Object(Te.a)(n,2),i=c[0],s=c[1];return r.useEffect((function(){s(t)}),[t]),Object(a.jsxs)(P,{padding:"10px",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(q,{}),Object(a.jsx)("h2",{style:{marginLeft:"18px",marginBottom:"30px"},children:"Edit Notice"})]}),Object(a.jsx)(V.a,Object(u.a)(Object(u.a)({},e),{},{children:Object(a.jsxs)(F.a,{margin:"normal",redirect:"list",children:[Object(a.jsx)(R.a,{disabled:!0,source:"id"}),Object(a.jsx)(R.a,{required:!0,source:"title"}),Object(a.jsx)(W.a,{source:"imageUrl",label:"Image"}),Object(a.jsx)(ke.a,{onChange:function(e){return s(e)},label:"Enable Video",source:"videoOptions.enabled"}),i&&Object(a.jsx)(R.a,{label:"YouTube embed link",source:"videoOptions.ytLink"}),!i&&Object(a.jsx)(H.a,{accept:"image/*",source:"imageUpload",children:Object(a.jsx)(W.a,{source:"src",title:"title"})}),Object(a.jsx)(R.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})};var De=function(){return Object(a.jsxs)(s.a,{theme:U,title:"Admin Panel",dashboard:z,authProvider:G,dataProvider:{getList:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getSegments();case 2:return e.abrupt("return",{total:10,data:g.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getSegments();case 2:return e.abrupt("return",{data:Object(u.a)({},v(parseInt(n.id.toString()),t))});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMany:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getSegments();case 2:return e.abrupt("return",{data:g.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getManyReference:function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getSegments();case 2:return e.abrupt("return",{total:10,data:g.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t){return g.update(t.data,e)},updateMany:function(e,t){return Promise.all(t.ids.map((function(t){return g.update(parseInt(t),e)}))).then((function(e){return{data:e.map((function(e){return e.data}))}}))},create:function(e,t){return g.create(t.data,e)},delete:function(e,t){return g.delete(parseInt(t.id),e)},deleteMany:function(e,t){return Promise.all(t.ids.map((function(t){return g.delete(parseInt(t),e)}))).then((function(e){return{data:e.map((function(e){return e.data}))}}))}},menu:_e,children:[Object(a.jsx)(o.a,{icon:fe.a,options:{label:"Headers"},name:"header",list:E,create:K,edit:Y}),Object(a.jsx)(o.a,{icon:xe.a,options:{label:"Notice Board"},name:"noticeboard",list:Ie,edit:Ae,create:Pe}),Object(a.jsx)(o.a,{icon:xe.a,options:{label:"Footer"},name:"footer",list:pe,edit:be})]})};var Ce=function(){return Object(a.jsx)(De,{})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,591)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))};i.a.render(Object(a.jsx)(Ce,{}),document.getElementById("root")),Ue()}},[[489,1,2]]]);
//# sourceMappingURL=main.22e7f945.chunk.js.map