(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[0],{314:function(t,e,n){},315:function(t,e,n){},453:function(t,e,n){"use strict";n.r(e);var r=n(13),a=(n(0),n(14)),c=n.n(a),i=(n(314),n(315),n(527)),o=n(526),s=n(67),u=n(62),d=n.n(u),l=n(91),j=n(108),f=n(126),h=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_URL||"http://localhost:3100/segments",b=new function t(){var e=this;Object(f.a)(this,t),this.segmentsObj={},this._arrangeId=function(t){return t.data.forEach((function(t,e){return t.id=e+1}))},this._updateDb=function(t){return e._arrangeId(t),j.a.fetchJson("".concat(h,"/").concat(t.id),{method:"PUT",body:e.getSegmentBody(t)})},this.getSliceData=function(t){return e.segmentsObj[t].data},this.getSlice=function(t){return e.segmentsObj[t]},this.delete=function(t,n){var r=e.getSlice(n),a=r.data.findIndex((function(e){return e.id===t}));return r.data.splice(a,1),e._updateDb(r)},this.create=function(t,n){var r=e.getSlice(n);return t.id=r.data.length+1,r.data.push(t),e._updateDb(r)},this.getSegmentBody=function(t){return JSON.stringify({SegmentDetailID:t.id,SegmentID:t.id,Title:t.title,Details:JSON.stringify(t.data)})},this.getSegments=Object(l.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==Object.keys(e.segmentsObj).length){t.next=14;break}return t.prev=1,t.next=4,j.a.fetchJson(h);case 4:return t.next=6,t.sent.json;case 6:t.sent.forEach((function(t){var n=t.Title.toLowerCase().replace(" ","");e.segmentsObj[n]={id:t.SegmentDetailID,title:t.Title,data:JSON.parse(t.Details)}})),console.log(e.segmentsObj),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})))},g=function(t,e){return b.getSliceData(e).find((function(e){return e.id===t}))},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.a.fetchJson;return{getList:function(){var t=Object(l.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getSegments();case 2:return t.abrupt("return",{total:10,data:b.getSliceData(e)});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getOne:function(t,e){return g(parseInt(e.id.toString()),t)},getMany:function(){var t=Object(l.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n,"UPDATE"),t.next=3,b.getSegments();case 3:return t.abrupt("return",{data:b.getSliceData(e)});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),getManyReference:function(){var t=Object(l.a)(d.a.mark((function t(e,n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.getSegments();case 2:return t.abrupt("return",{total:10,data:b.getSliceData(e)});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),update:function(n,r){return e("".concat(t,"/").concat(n,"/").concat(r.id),{method:"PUT",body:JSON.stringify(r.data)}).then((function(t){return{data:t.json}}))},updateMany:function(n,r){return Promise.all(r.ids.map((function(a){return e("".concat(t,"/").concat(n,"/").concat(a),{method:"PUT",body:JSON.stringify(r.data)})}))).then((function(t){return{data:t.map((function(t){return t.json.id}))}}))},create:function(t,e){return console.log(e,"CREATE"),b.create(e.data,t).then((function(t){var e=t.json;return{data:Object(s.a)(Object(s.a)({},e),{},{id:e.id})}}))},delete:function(t,e){return b.delete(parseInt(e.id),t).then((function(t){return{data:t.json}}))},deleteMany:function(t,e){return Promise.all(e.ids.map((function(e){return b.delete(parseInt(e),t)}))).then((function(t){return{data:t.map((function(t){return t.json.id}))}}))}}},O=n(528),m=n(529),x=n(536),S=n(519),v=n(534),y=function(t){return Object(r.jsx)(O.a,Object(s.a)(Object(s.a)({pagination:!1},t),{},{children:Object(r.jsxs)(m.a,{children:[Object(r.jsx)(x.a,{source:"id",sortable:!1}),Object(r.jsx)(x.a,{source:"title",sortable:!1}),Object(r.jsx)(x.a,{source:"text",sortable:!1}),Object(r.jsx)(S.a,{}),Object(r.jsx)(v.a,{})]})}))},D=n(271),T=n.n(D),P=n(272),_=n(521),E=n(522),k=Object(P.a)({palette:{primary:{main:_.a[500]},secondary:{main:E.a[600]}},overrides:{MuiAppBar:{colorSecondary:{color:"white",backgroundColor:_.a[500]}}}}),w=n(458),I=n(537),C=n(530),A=n(531),J=n(16),B=Object(J.i)((function(t){return Object(r.jsx)("div",{onClick:t.history.goBack,children:t.children})})),F=function(t){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{children:Object(r.jsx)(B,{children:Object(r.jsx)(w.a,{children:"Back"})})}),Object(r.jsx)(I.a,Object(s.a)(Object(s.a)({title:"Add a new header"},t),{},{children:Object(r.jsxs)(C.a,{redirect:"list",children:[Object(r.jsx)(A.a,{required:!0,source:"title"}),Object(r.jsx)(A.a,{required:!0,multiline:!0,source:"text"})]})}))]})},R=function(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(B,{children:Object(r.jsx)(w.a,{children:"Back"})}),Object(r.jsx)("h1",{children:"Edit Page"})]})};var L=function(){return Object(r.jsx)(i.a,{theme:k,title:"Admin Panel",dataProvider:p(h),children:Object(r.jsx)(o.a,{icon:T.a,options:{label:"Headers"},name:"header",list:y,create:F,edit:R})})},N=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,543)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,i=e.getTTFB;n(t),r(t),a(t),c(t),i(t)}))};c.a.render(Object(r.jsx)(L,{}),document.getElementById("root")),N()}},[[453,1,2]]]);
//# sourceMappingURL=main.396d82be.chunk.js.map