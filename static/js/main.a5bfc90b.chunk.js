(this["webpackJsonpadmin-panel"]=this["webpackJsonpadmin-panel"]||[]).push([[0],{330:function(e,t,n){},331:function(e,t,n){},469:function(e,t,n){"use strict";n.r(t);var r=n(10),a=(n(0),n(14)),i=n.n(a),c=(n(330),n(331),n(546)),o=n(545),s=n(40),u=n(21),d=n.n(u),l=n(43),p=n(103),f=n(65),h=n(77),j="https://api.alhamdian.pk/api/SegmentDetail",b=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.alhamdian.pk/api/SegmentDetail"}).REACT_APP_AUTH_URL||"https://api.alhamdian.pk/api/login",g=Object({NODE_ENV:"production",PUBLIC_URL:"https://shessafridi.github.io/admin-panel",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://api.alhamdian.pk/api/SegmentDetail"}).REACT_APP_FILE_UPLOAD_URL||"https://api.nisafoundation.org/api/SegmentDetail/UploadFile",m=new function e(){var t=this;Object(f.a)(this,e),this.uploadAllFiles=function(e){return Promise.all(e.map((function(e){return t.uploadFile(e)}))).then((function(e){return e.map((function(e){return e.body}))}))},this.uploadFile=function(e){var t=new FormData;return t.append("formFile",e,e.name),console.log(t),console.log(e),p.a.fetchJson(g,{method:"POST",body:t})}},O=new(function(){function e(){var t=this;Object(f.a)(this,e),this.segmentsObj={},this._arrangeId=function(e){return e.data.forEach((function(e,t){return e.id=t+1}))},this._updateDb=function(e){return t._arrangeId(e),p.a.fetchJson("".concat(j,"/").concat(e.id),{method:"PUT",headers:t.getHttpHeaders(),body:t._getSegmentBody(e)})},this._getSegmentBody=function(e){return JSON.stringify({SegmentDetailID:e.id,SegmentID:e.id,Title:e.title,Details:JSON.stringify(e.data)})},this.uploadImagesIfExist=function(){var e=Object(l.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.imageUpload||!Array.isArray(t.imageUpload)){e.next=3;break}return e.next=3,m.uploadAllFiles(t.imageUpload.map((function(e){return e.rawFile}))).then((function(e){return delete t.imageUpload,t.imageUrl=e[0].replace(/"/g,"")}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.create=function(){var e=Object(l.a)(d.a.mark((function e(n,r){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getSlice(r),n.id=a.data.length+1,a.data.push(n),e.next=5,t.uploadImagesIfExist(n);case 5:return e.abrupt("return",t._updateDb(a).then((function(){return{data:Object(s.a)(Object(s.a)({},n),{},{id:n.id})}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.getSliceData=function(e){return t.segmentsObj[e].data},this.getSlice=function(e){return t.segmentsObj[e]},this.update=function(){var e=Object(l.a)(d.a.mark((function e(n,r){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.getSlice(r),i=a.data.findIndex((function(e){return e.id===n.id})),a.data[i]=n,e.next=5,t.uploadImagesIfExist(n);case 5:return e.abrupt("return",t._updateDb(a).then((function(e){var t=e.json;return{data:Object(s.a)({id:t.id},t)}})));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.delete=function(e,n){var r=t.getSlice(n),a=r.data.findIndex((function(t){return t.id===e})),i=r.data.splice(a,1);return t._updateDb(r).then((function(){return{data:i[0]}}))},this.getSegments=Object(l.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(t.segmentsObj).length){e.next=14;break}return e.prev=1,e.next=4,p.a.fetchJson(j);case 4:return e.next=6,e.sent.json;case 6:e.sent.forEach((function(e){var n=e.Title.toLowerCase().replace(" ","");t.segmentsObj[n]={id:e.SegmentDetailID,title:e.Title,data:JSON.parse(e.Details)}})),console.log(t.segmentsObj),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))}return Object(h.a)(e,[{key:"getHttpHeaders",value:function(){var e=localStorage.getItem("auth");return e?new Headers({"Content-Type":"application/json",Authorization:"Bearer "+e}):new Headers({"Content-Type":"application/json"})}}]),e}()),x=function(e,t){return O.getSliceData(t).find((function(t){return t.id===e}))},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a.fetchJson;return{getList:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getSegments();case 2:return e.abrupt("return",{total:10,data:O.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getOne:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getSegments();case 2:return e.abrupt("return",{data:Object(s.a)({},x(parseInt(n.id.toString()),t))});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getMany:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n,"UPDATE"),e.next=3,O.getSegments();case 3:return e.abrupt("return",{data:O.getSliceData(t)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getManyReference:function(){var e=Object(l.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getSegments();case 2:return e.abrupt("return",{total:10,data:O.getSliceData(t)});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),update:function(e,t){return console.log(t,"UPDATE"),O.update(t.data,e)},updateMany:function(n,r){return Promise.all(r.ids.map((function(a){return t("".concat(e,"/").concat(n,"/").concat(a),{method:"PUT",body:JSON.stringify(r.data)})}))).then((function(e){return{data:e.map((function(e){return e.json.id}))}}))},create:function(e,t){return console.log(t,"RES"),O.create(t.data,e)},delete:function(e,t){return O.delete(parseInt(t.id),e)},deleteMany:function(e,t){return Promise.all(t.ids.map((function(t){return O.delete(parseInt(t),e)}))).then((function(e){return{data:e.map((function(e){return e.data}))}}))}}},S=n(32),w=n(470),y=n(547),_=n(548),P=n(536),T=n(537),D=n(553),E=function(e){var t=e.children,n=e.padding;return Object(r.jsx)("div",{style:{padding:n},children:t})},I=function(e){var t=e,n=t.resource[0].toUpperCase()+t.resource.slice(1),a=Object(S.a)(),i=Object(w.a)(a.breakpoints.down("sm"));return Object(r.jsxs)(E,{padding:"10px",children:[Object(r.jsxs)("h2",{children:[n," List"]}),Object(r.jsx)(y.a,Object(s.a)(Object(s.a)({pagination:!1},e),{},{children:Object(r.jsxs)(_.a,{style:{overflowY:"hidden",overflowX:"scroll"},children:[Object(r.jsx)(P.a,{source:"id",sortable:!1}),Object(r.jsx)(P.a,{source:"title",sortable:!1}),!i&&Object(r.jsx)(P.a,{source:"text",sortable:!1}),Object(r.jsx)(T.a,{}),Object(r.jsx)(D.a,{})]})}))]})},k=n(288),A=n.n(k),U=n(289),C=n(539),R=n(540),H=Object(U.a)({palette:{primary:{main:C.a[500]},secondary:{main:R.a[600]}},overrides:{MuiToolbar:{dense:{minHeight:"55px"}},MuiListItemIcon:{root:{color:C.a[300]}},MuiMenuItem:{root:{"&$selected":{color:C.a[500]},textTransform:"uppercase",fontSize:"14px",fontWeight:"bold",marginTop:"8px",paddingTop:"14px",paddingBottom:"14px"}},MuiAppBar:{colorSecondary:{color:"white",backgroundColor:C.a[500]}}}}),L=n(558),F=n(549),J=n(555),B=n(550),M=n(544),N=n(293),W=n(270),K=n.n(W),q=n(16),z=Object(q.i)((function(e){return Object(r.jsx)(N.a,{color:"primary",onClick:e.history.goBack,children:Object(r.jsx)(K.a,{})})})),V=function(e){return Object(r.jsxs)(E,{padding:"10px",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(z,{}),Object(r.jsx)("h3",{style:{marginLeft:"18px"},children:"Add a new Header"})]}),Object(r.jsx)(L.a,Object(s.a)(Object(s.a)({title:"Add a new header"},e),{},{children:Object(r.jsxs)(F.a,{redirect:"list",children:[Object(r.jsx)(J.a,{required:!0,source:"title"}),Object(r.jsx)(B.a,{multiple:!0,accept:"image/*",source:"imageUpload",children:Object(r.jsx)(M.a,{source:"src",title:"title"})}),Object(r.jsx)(J.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})},X=n(552),Y=function(e){return Object(r.jsxs)(E,{padding:"10px",children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(z,{}),Object(r.jsx)("h3",{style:{marginLeft:"18px"},children:"Edit Header"})]}),Object(r.jsx)(X.a,Object(s.a)(Object(s.a)({},e),{},{children:Object(r.jsxs)(F.a,{redirect:"list",children:[Object(r.jsx)(J.a,{disabled:!0,source:"id"}),Object(r.jsx)(J.a,{required:!0,source:"title"}),Object(r.jsx)(M.a,{source:"imageUrl",label:"Image"}),Object(r.jsx)(B.a,{multiple:!0,accept:"image/*",source:"imageUpload",children:Object(r.jsx)(M.a,{source:"src",title:"title"})}),Object(r.jsx)(J.a,{rows:6,required:!0,multiline:!0,source:"text"})]})}))]})},$=function(){return Object(r.jsx)(E,{padding:"10px",children:Object(r.jsx)("h1",{children:"Welcome to the dashboard"})})},G=function e(t,n){Object(f.a)(this,e),this.UsernameOrEmail=t,this.Password=n},Q=new function e(){var t=this;Object(f.a)(this,e),this.currentUser=null,this.login=function(){var e=Object(l.a)(d.a.mark((function e(n,r){var a,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.fetchJson(b,{method:"POST",body:JSON.stringify(new G(n,r)),headers:new Headers({"Content-Type":"application/json"})});case 2:if(!((a=e.sent).status<200||a.status>=300)&&a.json.Successful){e.next=5;break}throw new Error("".concat(a.status));case 5:return i=a.json.Response,t.currentUser=i,e.abrupt("return",i.access_token);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Z={login:function(){var e=Object(l.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,e.abrupt("return",Q.login(n,r).then((function(e){localStorage.setItem("auth",e)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),logout:function(e){return localStorage.removeItem("auth"),Promise.resolve()},checkAuth:function(e){return localStorage.getItem("auth")?Promise.resolve():Promise.reject()},checkError:function(e){return Promise.resolve()},getPermissions:function(e){return Promise.resolve()}};var ee=function(){return Object(r.jsx)(c.a,{theme:H,title:"Admin Panel",dashboard:$,authProvider:Z,dataProvider:v(j),children:Object(r.jsx)(o.a,{icon:A.a,options:{label:"Headers"},name:"header",list:I,create:V,edit:Y})})},te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,559)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};i.a.render(Object(r.jsx)(ee,{}),document.getElementById("root")),te()}},[[469,1,2]]]);
//# sourceMappingURL=main.a5bfc90b.chunk.js.map